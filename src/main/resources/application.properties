spring.application.name=scraper-webtoons

# Database Connection (override via env)
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/manhwa_trends}
spring.datasource.username=${DB_USER:manhwa_user}
spring.datasource.password=${DB_PASS:manhwa_password}
spring.jpa.hibernate.ddl-auto=validate

# Tell Spring Batch to create the necessary metadata tables
spring.batch.jdbc.initialize-schema=always

# Ensure Spring Boot actually runs the initialization scripts for PostgreSQL
spring.sql.init.mode=always

# Batch Configuration
spring.batch.job.enabled=false
app.batch.stale-execution-seconds=300

# Weekly snapshot schedule (Spring cron: sec min hour day month day-of-week)
# Default: Mondays at 03:00 UTC
app.snapshot.cron=0 0 3 ? * MON
app.snapshot.zone=UTC
# Ranking exclusions (comma-separated genres, case-insensitive, space/hyphen tolerant)
# Keep this focused on explicit adult genres so mainstream action/fantasy series are not hidden.
app.ranking.excluded-genres=Ecchi,Hentai,Adult,Shoujo,Shoujo Ai,Shounen Ai,Slice of Life,Yaoi,Yuri,LGBTQ+,Gender Bender,Josei,lgbtq,lgbt,bl

# Webtoons scraping (views)
app.webtoons.base-url=https://www.webtoons.com
app.webtoons.genres-path=/en/genres
app.webtoons.genre-sort-order=MANA
app.webtoons.user-agent=Mozilla/5.0
app.webtoons.request-timeout-ms=20000
# Comma-separated genre exclusions for Webtoons crawl (slug or display name, e.g. romance,slice_of_life)
app.webtoons.excluded-genres=
# Delay between genre page requests to reduce server pressure
app.webtoons.genre-request-delay-ms=120
# Depth control: max entries to ingest per run after cross-genre dedupe (<=0 means all)
app.webtoons.max-items=0
app.webtoons.cron=${app.snapshot.cron}

# Asura Comic scraping (followers)
app.asura.base-url=https://asuracomic.net
app.asura.series-path=/series?page=
app.asura.max-pages=16
app.asura.user-agent=Mozilla/5.0
app.asura.cron=${app.snapshot.cron}
app.asura.page-delay-ms=300
app.asura.request-delay-ms=200
app.asura.stale-page-limit=2

# Tapas scraping
app.tapas.base-url=https://story-api.tapas.io
app.tapas.endpoint=/cosmos/api/v1/landing/genre
app.tapas.category-type=COMIC
app.tapas.subtab-id=17
app.tapas.page-size=25
app.tapas.user-agent=Mozilla/5.0
app.tapas.request-delay-ms=200

# MangaUpdates enrichment
app.mangaupdates.enabled=true
app.mangaupdates.base-url=https://api.mangaupdates.com
app.mangaupdates.user-agent=Mozilla/5.0
app.mangaupdates.request-delay-ms=120
app.mangaupdates.search.max-results=10
app.mangaupdates.search.min-score=700
